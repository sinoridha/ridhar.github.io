'use strict';(function(){const indexCfg={cache:true};indexCfg.doc={id:'id',field:['title','content'],store:['title','href','section'],};const index=FlexSearch.create('balance',indexCfg);window.bookSearchIndex=index;index.add({'id':0,'href':'/clean-function-command-query-separation/','title':"Clean Function: Command Query Separation",'section':"Ridha R",'content':"command functions are:\n deleteSessionRegistry calculateMonthlyFee publishArticle sentEmailReport  query functions are:\n getName getNettPayroll getDiscount  If you are programmers you should spot the differences. Command function should do something and the query function should answer something.\nBut have you found a function like this\ndef calculate_nett_payroll response_tax_service = get_user_tax(@user.id) if response_tax_service.status == 200 @payroll_net = @payroll_gross - response_tax_service.body.tax_amount return \u0026quot;ok\u0026quot; end return \u0026quot;nok\u0026quot; end Those are command query but returning something just like the query function, leads to confusion. So you must go with separating query from command function to prevent ambiguity.\nBut how to handle the command function that functions caller to make sure the function process is going well? For example, a function that requests to a web service may return a response error. I have explained in my article Clean Function: Using Exception to Return Eror Code.\n"});index.add({'id':1,'href':'/clean-function-using-exception-to-return-error-code/','title':"Clean Function: Using Exception to Return Error Code",'section':"Ridha R",'content':"Experienced programmers must have faced cases where a process within function needs to be checked. Some programmers will create a function that returns the status of the process or returning an error code. For example, a function that sent a request to external web services, and the response of web services should check whether a success response, error response or timeout.\ndef calculate_nett_payroll response_tax_service = get_user_tax(@user.id) if response_tax_service.status == 200 @payroll_net = @payroll_gross - response_tax_service.body.tax_amount return \u0026quot;ok\u0026quot; end return \u0026quot;nok\u0026quot; end Function calculate_nett_payroll will return \u0026ldquo;ok\u0026rdquo; when processing gets data from tax service success and calculating the net payroll. If the response tax service is not 200 then the function will return the error code \u0026ldquo;nok\u0026rdquo;.\nif andi.calculate_tax == \u0026quot;ok\u0026quot; if andi.calculate_nett_payroll == 'ok' logger.info(\u0026quot;Payroll of Andi is #{andi.payroll_net}\u0026quot;) else logger.info(\u0026quot;Payroll calculation net payroll error\u0026quot;) end else logger.info(\u0026quot;Payroll calculation tax error\u0026quot;) end The caller of the function must check the error code first before he accesses the needed data andi.payroll_net. Not only function calculate_nett_payroll there are function calculate_tax that have same logic. Due to checking the error code of the function client need to make the nested structure.\nRobert C. Martin in his book Clean Code prefers to use exception instead of return error code. Here is the updated method of calculate_nett_payroll that used exception.\nbegin ane.calculate_tax ane.calculate_nett_payroll logger.info(\u0026quot;Payroll of Ane is #{ane.payroll_net}\u0026quot;) rescue StandardError =\u0026gt; e logger.info(\u0026quot;Payroll calculation error: #{e.message}\u0026quot;) end You might spot the code become cleaner, less nested structure, and has less line of code. The happy path becomes more clear and straight forward, within begin and rescue, and so the negative path becomes much more simple.\nCheckout full example code in here https://github.com/sinoridha/function_prefer_exceptions_to_returning_error_code\nOr you can play in here https://repl.it/@sinoridha/Function-Prefer-Exceptions-to-returning-error-code\n"});index.add({'id':2,'href':'/server-sent-events-sse-you-need-to-know/','title':"Server Sent Events (SSE) You Need to Know",'section':"Ridha R",'content':"Server Sent Events (SSE) is like a common client-server HTTP request, instead of waiting for a response from the server, the client can get events during that time from the server.\nSEE use when :\n While thinking implement WebSocket, (communication will happen bi-directionally) but client no need to sent an event to the server. Want chunk response instead of waiting all process to be completed in one request  When to don\u0026rsquo;t use it\n Your client/browser is not compatible, check here for browser support https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events#browser_compatibility The client needs to the sent event to the server, use WebSocket SSE have limit connection per browser per domain, max 6 tab.  SEE better to be used on these cases\n Uploading bulk data and FE display the progression. Display dashboard data that need to re-fetch gradually.  Caution use cases\n You need to update list of transactional data from transacation table  make sure you limit your, add proper index, and always monitor query time due to the data is getting bigger.    Refrences:\n https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events  "});index.add({'id':3,'href':'/code-that-breaking-srp/','title':"Code That Breaking SRP",'section':"Ridha R",'content':"What is SRP? #  Single responsibility principle (SRP) states that a class or module should have one, and only one reasone to change.\nRobert Cecil Martin (2008) Clean Code, : .\n#1 #  public class UserValidator { private Cryptographer cryptographer; public boolean checkPassword(String userName, String password) { User user = UserGateway.findByName(userName); if (user != User.NULL) { String codedPhrase = user.getPhraseEncodedByPassword(); String phrase = cryptographer.decrypt(codedPhrase, password); if (\u0026quot;Valid Password\u0026quot;.equals(phrase)) { Session.initialize(); return true; } } return false; } } Robert Cecil Martin (2008) Clean Code, : . - Listing 3-6\n Doing something else than checking password. Session.initialize()\n #2 #  public Money calculatePay(Employee e) throws InvalidEmployeeType { switch (e.type) { case COMMISSIONED: return calculateCommissionedPay(e); case HOURLY: return calculateHourlyPay(e); case SALARIED: return calculateSalariedPay(e); default: throw new InvalidEmployeeType(e.type); } } Robert Cecil Martin (2008) Clean Code, : . - Listing 3-4\n There is more than one reason for it to change\n #3 #  public class Sql { public Sql(String table, Column[] columns) public String create() public String insert(Object[] fields) public String selectAll() public String findByKey(String keyColumn, String keyValue) public String select(Column column, String pattern) public String select(Criteria criteria) public String preparedInsert() private String columnList(Column[] columns) private String valuesList(Object[] fields, final Column[] columns) private String selectWithCriteria(String criteria) private String placeholderList(Column[] columns) } Robert Cecil Martin (2008) Clean Code, : . - Listing 10-9\n Class must change when we add a new type of statement \u0026amp; when we alter the details of a single statement type\n "});index.add({'id':4,'href':'/add-proper-index-table-for-slow-query-mysql/','title':"Add Proper Index Table For Slow Query MYSQL",'section':"Ridha R",'content':"For software engineer especially on the backend, might have faced issue slow query in the Production environment. This happens when the query that builds in the development environment only has small data set and shows good query time. Maybe first-time query landing on production environment everything just fine, just like a time bomb, production dataset getting bigger and the query time is slowing down and your alert system notifies you for the slow query, or database CPU got high. If you are unlucky (don\u0026rsquo;t have a good alert system) and your boss will alert you and it is time for you to hurry and hotfix.\nIf you have identified the problem slow query, the quick solution is to add more indexes to the related table. Adding more index comes with a cost, it is affect writing performance. But at that time it is your quickest fix you can take.\nIf you are guessing when decide which columns table to be added and your database are MYSQL, you might try EXPLAIN command of MYSQL to get insight into what your query did. Here a quick example of how EXPLAIN command will help you.\nYou have found this query is slow in your production database.\nSELECT h.* FROM h INNER JOIN p ON h.id = p.h_id WHERE p.d_id = 26356 This query takes for (Hold your comment I know its consider a fast query but you will see the difference next)\nThen you can run EXPLAIN before your query\nEXPLAIN SELECT h.* FROM h INNER JOIN p ON h.id = p.h_id WHERE p.d_id = 26356 And you will get this\n Details explanation of output of command EXPLAIN you will get in here https://dev.mysql.com/doc/refman/5.6/en/explain-output.html\n See red mark on column key and the first row, it means your query look over table p without index, identified by null value. Then you see a red mark on column rows and the first row, for p table MySQL do examine 218404 row in the table, this is total data in table p. And on Extra, it tells that examines p table is using where condition not index.\nAnd you need to see a red mark on columns ref and the second row and this is what you are looking at. This is the table column that you need to add the index. In this example I add index for column p.h_id with index name idx_h_id.\nIf in your case the value of ref is you think is not relevant, you need to decide by yourself which column to add a new index to reduce the high value of row. The lower number of row will faster your query.\nNow if I run EXPLAIN again the result will be like this.\nSee the row value decrease from 218404 to 10 and on table p row the new index idx_h_id is used in the query process. And the query time is faster now. On Extra it tells that p table is now using index while scanning.\nHope it helps you! Put your comment below.\n"});index.add({'id':5,'href':'/tell-dont-ask/','title':"Object-oriented Design: Tell Don't Ask",'section':"Ridha R",'content':"\u0026ldquo;Tell don\u0026rsquo;t ask\u0026rdquo; is one of the tricks to doing object-oriented design.\nSo what it means? You should not \u0026ldquo;ask\u0026rdquo; something from an object to do a logical result, but you should \u0026ldquo;tell\u0026rdquo; the object to do it.\nuser = User.new('subscriber') if user.type == 'subscriber' user_price = 10 else user_price = 50 end It\u0026rsquo;s better when\nclass User def price user.type == 'subscriber' ? 10 : 50 end end user = User.new('subscriber') user.price //10 Is it as simple as that? Unfortunately not. While developing the real app we may find many types of objects, many application layers and you need to rethink to move the logic to object. Here is an example.\n\u0026lt;% if @user.type == \u0026quot;subscriber\u0026quot; %\u0026gt; @user.message_subscriber \u0026lt;% else %\u0026gt; @user.message_non_subscriber \u0026lt;% end %\u0026gt; Are you going to move presentation logic to your user class?\nWhat do you think?\n"});index.add({'id':6,'href':'/object-oriented-programing-mindset/','title':"Object-oriented Design Mindset?",'section':"Ridha R",'content':"This topic is bothering me for years, how to make a programmer has an object-oriented design mindset?\nPopular codes I have seen during my working experience as a programmer, are it is procedural programming, wrote at an MVC framework, in a controller method. The controller becomes a massive code and hard to read. Sometimes I found there are “service pattern”, typically named with {domain}Service. Most of the time this service class becomes a big chunk of the instance method.\nDid I have a problem with it? No, it solves the problem. When the requirement was change try to make changes, if it is too complex or the programmer worry or not confident to make a change, just make a new one. Simple, straight forward.\nSo why it is bothering me. Names software engineers guru from Robert C. Martin to Gang of four, their share best practices with an object-oriented approach. SOLID, clean code, design patterns, code smells all came with an object-oriented solution. But what happens if the programmer itself has no idea how to implement the object-oriented design.\nWhat do you think? Here is next thing you need to look at.\n\n"});index.add({'id':7,'href':'/database-quran-indonesia/','title':"Database Quran Indonesia",'section':"Ridha R",'content':"Kali ini saya mau berbagi database Al-Quran Indonesia yang mana sangat bermanfaat bagi rekan para developer aplikasi yang akan membuat aplikasi Al Quran Indonesia. Database ini masih berupa SQL script (.sql) yang di dalamnya hanya melakukan proses create table dan insert saja.\nMembagi pengalaman saya dalam membuat aplikasi Zikir dan Quran, saat awal pengembangan aplikasi saya mengambil data Quran dari http://www.qurandatabase.org/. Akan tetapi masih ada beberapa kekurangan dimana ada harkat yang di baca panjang tapi tidak tertulis panjang, sepertinya layaknya Al-Quran cetakan Indonesia.\nDengan format masih dalam .sql script saya harap masih dapat dikembangka dari sisi struktur tabel sesuai kebutuhan developer.\nRefrensi dabase AlQuran ini adalah litequran.net yang mana tertulis di site tersebut mengambil dari varsi Kemenang (\u0026ldquo;02.07.2018 sesuai versi Kemenag\u0026rdquo;). Karena di litequran.net tidak tersedia informasi pengembangnya, bagi yang kenal developer site tersebut mohon sapaikan izin saya untuk mengambil refrensi Al-Quran dan membagikannya ke rekan-rekan. Semoga Allah memberikan pahala jariah bagi pengembang litequran.net.\nLink download : quran-indonesia.sql - https://drive.google.com/file/d/1QOZBsllfELIhoSJ8pUpeK18WTHe0Jfe2/view?usp=sharing\nOh iya karena rujukan awalnya adalah Al-Quran Kemenag, untuk font nya akan lebih cocok mengunakan font Al-Quran milik Kementrian Agama. Font nya bisa ambil langsung dari website resmi (https://quran.kemenag.go.id/index.php/about) atau langsung download ke (http://quran.kemenag.go.id/app/source/FONT_STANDAR.zip)\nUPDATE (25 April 2019) #  Saya menerima feedback beberapa aplikasi yang mengunakan source ini tanpa mengunakan font bawaan dari Kemenag. Bisa juga di download di sini: https://drive.google.com/file/d/1w99SkXIkJgCBNYld16e67Wo86JXCfouL/view?usp=sharing . Hal ini memungkinkan kesalahan Khat / tulisan, yang dapat menyebabkan kesalahan baca dan pengartian. Untuk memastikan implementasi source dan font sudah sesuai dapat mencocokan ke aplikasi yang saya buat: Zikir Indonesia https://play.google.com/store/apps/details?id=com.zikirindonesia\n"});index.add({'id':8,'href':'/ridhar-studio/','title':"Ridhar Studio",'section':"Ridha R",'content':"I build some app that exist on Play Store (Android).\nCheck this:\nZikir Indonesia - https://play.google.com/store/apps/details?id=com.zikirindonesia My first app, that I build base on my needs of an zikr app that include a counter feature on each zikr. Now this App also have Al-Quran and translation and have a special feature, Khatam prediction date.\nMy IP Now - https://play.google.com/store/apps/details?id=com.com.ridhar.ipapp You need to remember your used IP?\nJR Plan Poker - https://play.google.com/store/apps/details?id=com.ridhar.planningpoker Nah, you are in an Agile/Scrum team, and tomorrow is sprint planning day ?\n"});index.add({'id':9,'href':'/about/','title':"About Me",'section':"Ridha R",'content':"My name is Ridha Ramadhansyah, I a muslim, software engineer base on Jakarta, Indonesia.\nYou will find my writes on this site.\nFind Me: sinoridha@gmail.com https://www.linkedin.com/in/ridharamadhansyah/ https://github.com/sinoridha\n"});})();